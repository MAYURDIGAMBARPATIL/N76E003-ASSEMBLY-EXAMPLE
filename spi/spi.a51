ORG 00H
	P0M1 EQU 0B1H
	P0M2 EQU 0B2H
	P1M1 EQU 0B3H
	P1M2 EQU 0B4H
	P3M1 EQU 0ACH
	P3M2 EQU 0ADH
		MOV P0M1, #00H
		MOV P0M1, #0FFH
		MOV P1M1, #00H
		MOV P1M2, #0FFH
		MOV	P3M1, #00H
		MOV	P3M2, #0FFH
SS   EQU P3.0
SPCR EQU 0F3H
SPSR EQU 0F4H
SPDR EQU 0F5H
SFRS EQU 091H
TA   EQU 0C7H
START: ACALL SETUP
	   CLR SS
	   ACALL ENABLE
	   ACALL CL
	   ACALL CL2
	   ACALL CMD
	   ACALL SEND
	   SETB SS
	   ACALL STOP
	   SJMP START
	 
SETUP:	ORL SPCR,#10010011B
		RET
ENABLE:	ORL SPCR,#01000000B 
		RET
CL:	MOV SPDR,#00H
		MOV A,SPSR
		M1:CJNE A,#080H,M1
		ANL SPSR,#01111111B
		RET
CL2:	MOV SPDR,#00H
		MOV A,SPSR
		M2:CJNE A,#080H,M2
		ANL SPSR,#01111111B
		RET
CMD:	MOV SPDR,#011H
		MOV A,SPSR
		M3:CJNE A,#080H,M3
		ANL SPSR,#01111111B
		RET
SEND:	MOV SPDR,#0FFH
		MOV A,SPSR
		M4:CJNE A,#080H,M4
		ANL SPSR,#01111111B
		RET
		
STOP:   ANL SPCR,#00000000B
		RET

DELAY:  MOV R0,#30
HERE3:  MOV R1,#250
HERE2: 	MOV R2,#250
HERE1:  DJNZ R2,HERE1
		DJNZ R1,HERE2
		DJNZ R0,HERE3
		
		RET
END
	   